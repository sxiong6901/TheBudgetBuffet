{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Shawanda\\\\Documents\\\\Coding Bootcamp\\\\Homework\\\\TheBudgetBuffet\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport axios from 'axios';\nimport jwtDecode from 'jwt-decode';\nvar API = {\n  getToken: function getToken() {\n    return localStorage.getItem('token');\n  },\n  setToken: function setToken(token) {\n    localStorage.setItem('token', token);\n    return token;\n  },\n  getCurrentUser: function getCurrentUser() {\n    var token = this.getToken();\n\n    if (token) {\n      var decoded = jwtDecode(token);\n      console.log(decoded);\n    }\n\n    if (token) return _objectSpread({}, jwtDecode(token), {\n      token: token\n    });\n    return null;\n  },\n  logIn: function logIn(credentials) {\n    var _this = this;\n\n    var email = credentials.email,\n        password = credentials.password;\n    return axios.post('/api/users/authenticate', {\n      email: email,\n      password: password\n    }).then(function (serverResponse) {\n      var token = serverResponse.data.token;\n\n      if (token) {\n        // sets token as an included header for all subsequent api requests\n        axios.defaults.headers.common['token'] = _this.setToken(token);\n        return jwtDecode(token);\n      } else {\n        return false;\n      }\n    });\n  },\n  signUp: function signUp(userInfo) {\n    var _this2 = this;\n\n    var name = userInfo.name,\n        email = userInfo.email,\n        password = userInfo.password;\n    return axios.post('/api/users', {\n      name: name,\n      email: email,\n      password: password\n    }).then(function (serverResponse) {\n      var token = serverResponse.data.token;\n\n      if (token) {\n        axios.defaults.headers.common['token'] = _this2.setToken(token);\n        return jwtDecode(token);\n      } else {\n        return false;\n      }\n    });\n  },\n  logOut: function logOut() {\n    localStorage.removeItem('token');\n    delete axios.defaults.headers.common.token;\n    return true;\n  },\n  getSecret: function getSecret(token) {\n    // the jwt is stored as a default in headers (see login above)\n    // the jwt is removed on logout\n    // passing jwt as param on url (/api/users/secret/${token}) is a security violation\n    return axios.get(\"/api/users/secret\").then(function (serverResponse) {\n      console.log(\"response from server\");\n      console.log(serverResponse);\n      return serverResponse;\n    });\n  },\n  addRecipe: function addRecipe(recipe) {\n    return axios.post(\"/api/users/add\", recipe).then(function (serverResponse) {\n      console.log(\"response from server\");\n      console.log(serverResponse);\n      return serverResponse;\n    });\n  },\n  viewRecipe: function viewRecipe(recipe) {\n    return axios.get(\"/api/users/view\", recipe).then(function (serverResponse) {\n      console.log(\"response from server\");\n      console.log(serverResponse);\n      return serverResponse;\n    });\n  },\n  myRecipes: function myRecipes(recipe) {\n    return axios.get(\"/api/users/myRecipes\", recipe).then(function (serverResponse) {\n      console.log(\"response from server\");\n      console.log(serverResponse);\n      return serverResponse;\n    });\n  }\n};\naxios.defaults.headers.common['token'] = API.getToken();\nexport default API;","map":{"version":3,"sources":["C:\\Users\\Shawanda\\Documents\\Coding Bootcamp\\Homework\\TheBudgetBuffet\\client\\src\\utils\\API.js"],"names":["axios","jwtDecode","API","getToken","localStorage","getItem","setToken","token","setItem","getCurrentUser","decoded","console","log","logIn","credentials","email","password","post","then","serverResponse","data","defaults","headers","common","signUp","userInfo","name","logOut","removeItem","getSecret","get","addRecipe","recipe","viewRecipe","myRecipes"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport jwtDecode from 'jwt-decode'\r\n\r\nconst API = {\r\n\tgetToken: function() {\r\n\t\treturn localStorage.getItem('token')\r\n\t},\r\n\tsetToken: function(token) {\r\n\t\tlocalStorage.setItem('token', token)\r\n\t\treturn token\r\n\t},\r\n\tgetCurrentUser: function() {\r\n\t\tconst token = this.getToken()\r\n\t\tif (token) {\r\n\t\t\tlet decoded = jwtDecode(token);\r\n\t\t\tconsole.log(decoded)\r\n\t\t}\r\n\t\t\r\n\t\tif(token) return {...jwtDecode(token), token}\r\n\t\treturn null\r\n\t},\r\n\tlogIn: function(credentials) {\t\r\n\t\tconst {email, password} = credentials\r\n\t\treturn axios.post('/api/users/authenticate', {email, password})\r\n\t\t\t.then((serverResponse) => {\r\n\t\t\t\tconst token = serverResponse.data.token\r\n\t\t\t\tif(token) {\r\n\t\t\t\t\t// sets token as an included header for all subsequent api requests\r\n\t\t\t\t\taxios.defaults.headers.common['token'] = this.setToken(token)\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn jwtDecode(token)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t},\r\n\tsignUp: function(userInfo) {\r\n\t\tconst {name, email, password} = userInfo\r\n\t\treturn axios.post('/api/users', {name, email, password})\r\n\t\t.then((serverResponse) => {\t\t\t\r\n\t\t\tconst token = serverResponse.data.token\r\n\t\t\tif(token) {\t\t\t\t\r\n\t\t\t\taxios.defaults.headers.common['token'] = this.setToken(token)\t\t\t\t\r\n\t\t\t\treturn jwtDecode(token)\r\n\t\t\t} else {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tlogOut: function() {\r\n\t\tlocalStorage.removeItem('token')\r\n\t\tdelete axios.defaults.headers.common.token\r\n\t\treturn true\r\n\t},\r\n\tgetSecret: function(token){\r\n\t\t// the jwt is stored as a default in headers (see login above)\r\n\t\t// the jwt is removed on logout\r\n\t\t// passing jwt as param on url (/api/users/secret/${token}) is a security violation\r\n\t\t\r\n\t\treturn axios.get(`/api/users/secret`)\r\n\t\t.then((serverResponse) => {\t\r\n\t\t\tconsole.log(`response from server`)\r\n\t\t\tconsole.log(serverResponse)\r\n\t\t\treturn serverResponse\r\n\t\t})\r\n\t},\r\n\taddRecipe: function(recipe){\r\n\t\treturn axios.post(`/api/users/add`,recipe)\r\n\t\t.then((serverResponse) => {\t\r\n\t\t\tconsole.log(`response from server`)\r\n\t\t\tconsole.log(serverResponse)\r\n\t\t\treturn serverResponse\r\n\t\t})\r\n\t},\r\n\tviewRecipe: function(recipe){\r\n\t\treturn axios.get(`/api/users/view`,recipe)\r\n\t\t.then((serverResponse) => {\t\r\n\t\t\tconsole.log(`response from server`)\r\n\t\t\tconsole.log(serverResponse)\r\n\t\t\treturn serverResponse\r\n\t\t})\r\n\t},\r\n\tmyRecipes: function(recipe){\r\n\t\treturn axios.get(`/api/users/myRecipes`,recipe)\r\n\t\t.then((serverResponse) => {\t\r\n\t\t\tconsole.log(`response from server`)\r\n\t\t\tconsole.log(serverResponse)\r\n\t\t\treturn serverResponse\r\n\t\t})\r\n\t}\r\n}\r\naxios.defaults.headers.common['token'] = API.getToken()\r\n\r\nexport default API\r\n"]},"metadata":{},"sourceType":"module"}